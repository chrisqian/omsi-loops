<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <!-- to force a reload -->
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <!-- mobile support -->
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    
    <title>Idle Loops</title>
    <link rel="stylesheet" href="themes.css">
    <link rel="stylesheet" href="predictor.css">
    <link rel="stylesheet" href="stylesheet.css">
    <link rel="stylesheet" href="statsgraph.css">
    <link rel="stylesheet" href="iconfont.css">
    
    <link rel="stylesheet" href="lib/all.css">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="manifest.webmanifest">
    
    <script src='lib/jquery.min.js'></script>
    <script src='lib/lz-string.min.js'></script>
    <script src='lib/d3.v7.min.js'></script>
    <script src='lib/mousetrap.min.js'></script>

    <script src='polyfills.js'></script>

</head>

<!-- Google tag (gtag.js) -->
<!--
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D7MKZE2ZZH"></script>
-->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-D7MKZE2ZZH');
</script>
<!-- Google API (for cloud saves) -->
<!--
<script src="https://accounts.google.com/gsi/client" async defer></script>
<script src="https://apis.google.com/js/api.js" async defer></script>
-->
<body id="theBody" style="min-width:1210px">
    <div id="loadingBox" class="showWhileLoading hideWhenLoaded">
        <!-- This will only be visible if the localization has never been loaded in this browser -->
        <div id="loadingText" class="localized" data-lockey="misc>loading">Initial load (this may take a while)...</div>
    </div>
    <canvas id="talentTreeCanvas" style="display: none;"></canvas>
    <div id="talentTree" style="display: none;"></div>
    <header id="timeInfo" style="width:100%;text-align:center;">
        <button id="cheat" class="button showthat control" style="display: none; margin-top: 5px;" onclick="cheat()">Cheat</button>
        <div id="timeBarContainer" style="width:100%;height:10px;background:var(--progress-bar-background);text-align:center;position:relative;">
            <div id="timeBar" style="height:100%;width:20%;background-color:var(--progress-bar-mana-color);display:block;margin:auto;"></div>
        </div>
        <menu id='menu' style='float: left; height: 30px; margin-left: 24px; margin-right: -24px;'></menu>
        <div id='trackedResources'></div>
        <br>
        <div id='timeControls'></div>
    </header>

    <main id="main">
        <div id="statsColumn">
            <!-- The stat view starts out in radar mode so that init() can get text lengths -->
            <div id="statsWindow" data-view="radar">
                <div id="statsTitle" class="showthat block">
                    <div class="large bold localized" data-lockey="stats>title"></div>
                    <div class="showthis localized" data-lockey="stats>tooltip>explanation" style="width:550px;"></div>
                </div>
                <div id="statViewSelector" class="block">
                    <input type="radio" id="regularStats" name="statView" onclick="view.changeStatView()" checked />
                    <label for="regularStats" class="localized" data-lockey="stats>view>regular"></label>
                    <input type="radio" id="radarStats" name="statView" onclick="view.changeStatView()" />
                    <label for="radarStats" class="localized" data-lockey="stats>view>radar"></label>
                </div>
                <div class="showthat block" id="radarChart">
                    <svg id="statChart" class="radar-chart" viewBox="-200 -200 400 400" preserveAspectRatio="xMidYMin meet"></svg>
                    <div class="showthis localized" style="margin-top:20px;width:375px" data-lockey="stats>tooltip>graph_legend"></div>
                </div>
                <div id="statsContainer">
                    <div class='statContainer stat-total showthat' id="totalStatContainer">
                        <div class='statLabelContainer'>
                            <div class='medium bold stat-name localized' style='margin-left:18px;margin-top:5px;' data-lockey="stats>total>singular"></div>
                            <div class='medium statNum stat-soulstone' style='color:var(--stat-soulstone-color);' id='stattotalss'></div>
                            <div class='medium statNum stat-talent' id='stattotalTalent'>0</div>
                            <div class='medium statNum stat-level' id='stattotalLevel'>0</div>
                        </div>
                        <div class='showthis' id='stattotalTooltip' style='width:225px;'>
                            <div class='medium bold localized' data-lockey="stats>total>plural"></div>
                            <br>
                            <div class="localized" data-lockey="stats>total>blurb"></div>
                            <br>
                            <div class='medium bold localized colon-after' data-lockey="stats>tooltip>level"></div> <div id='stattotalLevel2'></div>
                            <br>
                            <div class='medium bold localized colon-after' data-lockey="stats>tooltip>talent"></div> <div id='stattotalTalent2'></div>
                            <br>
                            <div id='sstotalContainer' class='ssContainer'>
                                <div class='bold localized colon-after' data-lockey="stats>tooltip>soulstone"></div> <div id='sstotal'></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="skillList" style="width:100%;display:none">
                    <div class="showthat">
                        <div class="large bold localized" data-lockey="skills>title"></div>
                        <div class="showthis localized" data-lockey="skills>tooltip>no_reset_on_restart"></div>
                    </div><br>
                    <div class="skillContainer showthat" id="skillSCombatContainer">
                        <div class="skillLabel medium bold localized" data-lockey="skills>scombat>label"></div>
                        <div class="statNum medium"><div id="skillSCombatLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="showthis">
                            <span class="localized" data-lockey="skills>scombat>desc"></span><br>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillTCombatContainer">
                        <div class="skillLabel medium bold localized" data-lockey="skills>tcombat>label"></div>
                        <div class="statNum medium"><div id="skillTCombatLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="showthis">
                            <span class="localized" data-lockey="skills>tcombat>desc"></span><br>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillCombatContainer" onmouseover="view.showSkill('Combat')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>combat>label"></div>
                        <div class="statNum medium"><div id="skillCombatLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillCombatLevelBar"></div></div>
                        <div class="showthis">
                            <span class="localized" data-lockey="skills>combat>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillCombatLevelExp"></div>/<div id="skillCombatLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillCombatLevelProgress"></div>%)</div><br>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillMagicContainer" onmouseover="view.showSkill('Magic')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>magic>label"></div>
                        <div class="statNum medium"><div id="skillMagicLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillMagicLevelBar"></div></div>
                        <div class="showthis">
                            <span class="localized" data-lockey="skills>magic>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillMagicLevelExp"></div>/<div id="skillMagicLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillMagicLevelProgress"></div>%)</div><br>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillPracticalContainer" onmouseover="view.showSkill('Practical')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>practical>label"></div>
                        <div class="statNum medium"><div id="skillPracticalLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillPracticalLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>practical>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillPracticalLevelExp"></div>/<div id="skillPracticalLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillPracticalLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>practical>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillAlchemyContainer" onmouseover="view.showSkill('Alchemy')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>alchemy>label">Alchemy</div>
                        <div class="statNum medium"><div id="skillAlchemyLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillAlchemyLevelBar"></div></div>
                        <div class="showthis">
                            <span class="localized" data-lockey="skills>alchemy>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillAlchemyLevelExp"></div>/<div id="skillAlchemyLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillAlchemyLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>alchemy>desc2"></span><br>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillDarkContainer" onmouseover="view.showSkill('Dark')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>dark>label"></div>
                        <div class="statNum medium"><div id="skillDarkLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillDarkLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>dark>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillDarkLevelExp"></div>/<div id="skillDarkLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillDarkLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>dark>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillCraftingContainer" onmouseover="view.showSkill('Crafting')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>crafting>label"></div>
                        <div class="statNum medium"><div id="skillCraftingLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillCraftingLevelBar"></div></div>
                        <div class="showthis">
                            <span class="localized" data-lockey="skills>crafting>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillCraftingLevelExp"></div>/<div id="skillCraftingLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillCraftingLevelProgress"></div>%)</div><br>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillChronomancyContainer" onmouseover="view.showSkill('Chronomancy')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>chronomancy>label"></div>
                        <div class="statNum medium"><div id="skillChronomancyLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillChronomancyLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>chronomancy>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillChronomancyLevelExp"></div>/<div id="skillChronomancyLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillChronomancyLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>chronomancy>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillPyromancyContainer" onmouseover="view.showSkill('Pyromancy')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>pyromancy>label"></div>
                        <div class="statNum medium"><div id="skillPyromancyLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillPyromancyLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>pyromancy>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillPyromancyLevelExp"></div>/<div id="skillPyromancyLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillPyromancyLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>pyromancy>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillRestorationContainer" onmouseover="view.showSkill('Restoration')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>restoration>label"></div>
                        <div class="statNum medium"><div id="skillRestorationLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillRestorationLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>restoration>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillRestorationLevelExp"></div>/<div id="skillRestorationLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillRestorationLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>restoration>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillSpatiomancyContainer" onmouseover="view.showSkill('Spatiomancy')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>spatiomancy>label"></div>
                        <div class="statNum medium"><div id="skillSpatiomancyLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillSpatiomancyLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>spatiomancy>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillSpatiomancyLevelExp"></div>/<div id="skillSpatiomancyLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillSpatiomancyLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>spatiomancy>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillMercantilismContainer" onmouseover="view.showSkill('Mercantilism')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>mercantilism>label"></div>
                        <div class="statNum medium"><div id="skillMercantilismLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillMercantilismLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>mercantilism>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillMercantilismLevelExp"></div>/<div id="skillMercantilismLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillMercantilismLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>mercantilism>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillDivineContainer" onmouseover="view.showSkill('Divine')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>divine>label"></div>
                        <div class="statNum medium"><div id="skillDivineLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillDivineLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>divine>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillDivineLevelExp"></div>/<div id="skillDivineLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillDivineLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>divine>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillCommuneContainer" onmouseover="view.showSkill('Commune')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>commune>label"></div>
                        <div class="statNum medium"><div id="skillCommuneLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillCommuneLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>commune>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillCommuneLevelExp"></div>/<div id="skillCommuneLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillCommuneLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>commune>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillGluttonyContainer" onmouseover="view.showSkill('Gluttony')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>gluttony>label"></div>
                        <div class="statNum medium"><div id="skillGluttonyLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillGluttonyLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>gluttony>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillGluttonyLevelExp"></div>/<div id="skillGluttonyLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillGluttonyLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>gluttony>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillWunderkindContainer" onmouseover="view.showSkill('Wunderkind')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>wunderkind>label"></div>
                        <div class="statNum medium"><div id="skillWunderkindLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillWunderkindLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>wunderkind>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillWunderkindLevelExp"></div>/<div id="skillWunderkindLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillWunderkindLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>wunderkind>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillThieveryContainer" onmouseover="view.showSkill('Thievery')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>thievery>label"></div>
                        <div class="statNum medium"><div id="skillThieveryLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillThieveryLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>thievery>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillThieveryLevelExp"></div>/<div id="skillThieveryLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillThieveryLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>thievery>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillLeadershipContainer" onmouseover="view.showSkill('Leadership')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>leadership>label"></div>
                        <div class="statNum medium"><div id="skillLeadershipLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillLeadershipLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>leadership>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillLeadershipLevelExp"></div>/<div id="skillLeadershipLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillLeadershipLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>leadership>desc2"></span>
                        </div>
                    </div>
                    <div class="skillContainer showthat" id="skillAssassinContainer" onmouseover="view.showSkill('Assassin')" onmouseout="view.showSkill(undefined)">
                        <div class="skillLabel medium bold localized" data-lockey="skills>assassin>label"></div>
                        <div class="statNum medium"><div id="skillAssassinLevel">0</div></div>
                        <div style="margin-top:18px;"></div>
                        <div class="thinProgressBarUpper"><div class="statBar skillExpBar townExpBar" id="skillAssassinLevelBar"></div></div>
                        <div class="showthis" style="width:490px">
                            <span class="localized" data-lockey="skills>assassin>desc"></span><br>
                            <div class="medium bold localized" data-lockey="skills>tooltip>level_exp"></div> <div id="skillAssassinLevelExp"></div>/<div id="skillAssassinLevelExpNeeded"></div> <div class="statTooltipPerc">(<div id="skillAssassinLevelProgress"></div>%)</div><br>
                            <span class="localized" data-lockey="skills>assassin>desc2"></span>
                        </div>
                    </div>
                </div>
                <div id="buffList" style="width:100%;margin-top:25px;flex-direction: column;display:none;">
                    <div class="showthat">
                        <div class="large bold localized" data-lockey="buffs>title"></div>
                        <div class="showthis localized" data-lockey="buffs>tooltip>no_reset_on_restart"></div>
                    </div>
                    <br>
                    <div id="buffsContainer" style="display: flex;flex-direction: column;"></div>
                </div>
            </div>
        </div>

        <div id="actionsColumn">
            <div id="actionList" style="width:100%;text-align:center;">
                <div class="showthat">
                <!--重置active列表-->
                    <button class="button" style="z-index: 0;" onclick="exportSave();importSave();">重置</button>
        
                    <div class="large bold localized" style="margin-right: -49px;" data-lockey="actions>title_list"></div>
                    <span id="predictorTotalDisplay" class="koviko"></span>
                    <span id="predictorStatisticDisplay" class="koviko"></span>
                    <div class="showthis">
                        <i class='actionIcon far fa-circle'></i> <span class='localized' data-lockey="actions>tooltip>icons>circle"></span><br>
                        <i class='actionIcon fas fa-plus'></i> <span class='localized' data-lockey="actions>tooltip>icons>plus"></span><br>
                        <i class='actionIcon fas fa-minus'></i> <span class='localized' data-lockey="actions>tooltip>icons>minus"></span><br>
                        <i class='actionIcon fas fa-arrows-alt-h'></i> <span class='localized' data-lockey="actions>tooltip>icons>arrows_h"></span><br>
                        <i class='actionIcon fas fa-sort-up'></i> <span class='localized' data-lockey="actions>tooltip>icons>sort_up"></span><br>
                        <i class='actionIcon fas fa-sort-down'></i> <span class='localized' data-lockey="actions>tooltip>icons>sort_down"></span><br>
                        <i class='actionIcon far fa-check-circle'></i><span style="margin-left: -2px;"> /</span><i class='actionIcon far fa-times-circle'></i> <span class='localized' data-lockey="actions>tooltip>icons>circles"></span><br>
                        <i class='actionIcon fas fa-times'></i> <span class='localized' data-lockey="actions>tooltip>icons>times"></span><br>
                        <span class='localized' data-lockey="actions>tooltip>list_explanation"></span>
                    </div>
                </div>
                <div style="position: relative; left: 135px;">
                    <button class="button" style="z-index: 0;" onclick="adjustActionListSize(100)"><i class="fas fa-plus"></i></button>
                    <button class="button" style="z-index: 0;" onclick="adjustActionListSize(-100)"><i class="fas fa-minus"></i></button>
                </div>
                <br>
                <div id="expandableList">
                    <div id="curActionsListContainer">
                        <div id="curActionsList"></div>
                        <div id="curActionsManaUsed" class="showthat">
                            <div class="bold localized" data-lockey="actions>tooltip>mana_used"></div>
                            <div id="totalTicks" style="font-size: 0.75rem;"></div>
                            <div class="showthis localized" data-lockey="actions>tooltip>mana_used_explanation"></div>
                        </div>
                    </div>
                    <div id="nextActionsListContainer">
                        <div id="nextActionsList"></div>
                        <div id="actionTooltipContainer" style="margin-top:10px;width:100%;text-align:left;max-height:357px;overflow:auto;"></div>
                        <div id="nextActionsAmountButtons">
                            <div class="bold localized" data-lockey="actions>tooltip>amount"></div>
                            <button class="button change-amount" onclick="changeActionAmount(1)">1</button>
                            <button class="button change-amount" onclick="changeActionAmount(5)">5</button>
                            <button class="button change-amount" onclick="changeActionAmount(10)">10</button>
                            <input id="amountCustom" oninput="setCustomActionAmount()" onblur="setCustomActionAmount()" value="1" style="width: 75px; position: relative; left: 0; top: -2px; border: 1px solid var(--input-border); height: 16px;">
                        </div>
                    </div>
                </div>
                <div id="actionChanges" style="display:flex;text-align:left;width:100%;margin-top:5px;">
                    <div id="actionChangeOptions" style="width:50%;">
                        <input type="checkbox" id="keepCurrentListInput" class="checkbox" onchange="setOption('keepCurrentList', this.checked)">
                        <label for="keepCurrentListInput" class="localized" data-lockey="actions>tooltip>current_list_active"></label><br>
                        <input type="checkbox" id="repeatLastActionInput" class="checkbox" onchange="setOption('repeatLastAction', this.checked)">
                        <label for="repeatLastActionInput" class="localized" data-lockey="actions>tooltip>repeat_last_action"></label><br>
                        <input type="checkbox" id="addActionsToTopInput" class="checkbox" onchange="setOption('addActionsToTop', this.checked)">
                        <label for="addActionsToTopInput" class="localized" data-lockey="actions>tooltip>add_action_top"></label>
                    </div>
                    <div id="actionChangeButtons" style="margin-left:-4px;text-align:right;width:50%;">
                        <button id="maxTraining" class="button localized" style="margin-right:0px;display:none" onclick="capAllTraining()" data-lockey="actions>tooltip>max_training"></button>
                        <button id="clearList" class="button localized" style="margin-right:0px;" onclick="clearList()" data-lockey="actions>tooltip>clear_list"></button>
                        <div tabindex="0" class="showthatloadout">管理预设
                            <div class="showthisloadout">
                                <button class="loadoutbutton unused" id="load1" onclick="selectLoadout(1)" style="width:200px">Loadout 1</button>
                                <br>
                                <button class="loadoutbutton unused" id="load2" onclick="selectLoadout(2)" style="width:200px">Loadout 2</button>
                                <br>
                                <button class="loadoutbutton unused" id="load3" onclick="selectLoadout(3)" style="width:200px">Loadout 3</button>
                                <br>
                                <button class="loadoutbutton unused" id="load4" onclick="selectLoadout(4)" style="width:200px">Loadout 4</button>
                                <br>
                                <button class="loadoutbutton unused" id="load5" onclick="selectLoadout(5)" style="width:200px">Loadout 5</button>
                                <br>
                                <button class="loadoutbutton unused" id="load6" onclick="selectLoadout(6)" style="width:200px">Loadout 6</button>
                                <br>
                                <button class="loadoutbutton unused" id="load7" onclick="selectLoadout(7)" style="width:200px">Loadout 7</button>
                                <br>
                                <button class="loadoutbutton unused" id="load8" onclick="selectLoadout(8)" style="width:200px">Loadout 8</button>
                                <br>
                                <button class="loadoutbutton unused" id="load9" onclick="selectLoadout(9)" style="width:200px">Loadout 9</button>
                                <br>
                                <button class="loadoutbutton unused" id="load10" onclick="selectLoadout(10)" style="width:200px">Loadout 10</button>
                                <br>
                                <button class="loadoutbutton unused" id="load11" onclick="selectLoadout(11)" style="width:200px">Loadout 11</button>
                                <br>
                                <button class="loadoutbutton unused" id="load12" onclick="selectLoadout(12)" style="width:200px">Loadout 12</button>
                                <br>
                                <button class="loadoutbutton unused" id="load13" onclick="selectLoadout(13)" style="width:200px">Loadout 13</button>
                                <br>
                                <button class="loadoutbutton unused" id="load14" onclick="selectLoadout(14)" style="width:200px">Loadout 14</button>
                                <br>
                                <button class="loadoutbutton unused" id="load15" onclick="selectLoadout(15)" style="width:200px">Loadout 15</button>
                                <br>
                                <button class="loadoutbutton localized" style="margin-bottom:5px;margin-top:3px;" onclick="saveList()" data-lockey="actions>tooltip>save_loadout"></button>
                                <button class="loadoutbutton localized" style="margin-bottom:5px;" onclick="loadList()" data-lockey="actions>tooltip>load_loadout"></button>
                                <br>
                                <input id="renameLoadout" value="Loadout Name" style="width: 100px; height: 16px; border: 1px solid var(--input-border); margin-left: 5px; margin-bottom: 2px;">
                                <button class="loadoutbutton" style="margin-bottom:5px;margin-top:3px;margin-right:-4px;" onclick="nameList(true)">改名</button>
                            </div>
                        </div>
                        <select id='predictorTrackedStatInput' class='button' onchange="setOption('predictorTrackedStat', this.value)"></select>
                    </div>
                </div>
            </div>

            <div id="spells" style="width:100%;text-align:center;margin-top:10px;display:none">
                <div class="showthat">
                    <div class="large bold localized" data-lockey="spells>title"></div>
                    <div class="showthis">
                    </div>
                </div><br>
                <div style="width:100%;padding-top:5px;">
                </div>
            </div>

        </div>

        <div id="townColumn" style="width:535px;vertical-align:top;">
            <div id="shortTownColumn">
                <div id="townWindow" style="width:100%;text-align:center;height:34px">
                    <div style="float:left;margin-left:150px;" class="actionIcon fa fa-arrow-left" id="townViewLeft" onclick="view.showTown(townsUnlocked[townsUnlocked.indexOf(townShowing)-1])"></div>
                    <div class="showthat">
                        <div class="large bold"><select class="bold" style="text-align:center" id="TownSelect"></select></div>
                        <div id='townDesc' class='showthis'></div>
                    </div>
                    <div style="float:right;margin-right:150px;" class="actionIcon fa fa-arrow-right" id="townViewRight" onclick="view.showTown(townsUnlocked[townsUnlocked.indexOf(townShowing)+1])"></div>
                    <div id="hideVarsButton" class="far fa-eye" onclick="view.toggleHiding()"></div>
                </div><br>
                <div id="townInfos">
                    <div id="townInfo0" class='townInfo'></div>
                    <div id="townInfo1" class='townInfo' style="display:none;"></div>
                    <div id="townInfo2" class='townInfo' style="display:none;"></div>
                    <div id="townInfo3" class='townInfo' style="display:none;"></div>
                    <div id="townInfo4" class='townInfo' style="display:none;"></div>
                    <div id="townInfo5" class='townInfo' style="display:none;"></div>
                    <div id="townInfo6" class='townInfo' style="display:none;"></div>
                    <div id="townInfo7" class='townInfo' style="display:none;"></div>
                    <div id="townInfo8" class='townInfo' style="display:none;"></div>
                </div>

                <div id="townActionTitle" class="block showthat" style="text-align:center;">
                    <div style="float:left;margin-left:150px;" class="actionIcon fa fa-arrow-left" id="actionsViewLeft" onclick="view.showActions(false)"></div>
                    <span class='large bold' id="actionsTitle"></span>
                    <div class='showthis localized' data-lockey="actions>tooltip>desc"></div>
                    <div style="float:right;margin-right:150px;" class="actionIcon fa fa-arrow-right" id="actionsViewRight" onclick="view.showActions(true)"></div>
                </div>
                <div id="townActions">
                    <div id="actionOptionsTown0" class='actionOptions'></div>
                    <div id="actionOptionsTown1" class='actionOptions' style="display:none;"></div>
                    <div id="actionOptionsTown2" class='actionOptions' style="display:none;"></div>
                    <div id="actionOptionsTown3" class='actionOptions' style="display:none;"></div>
                    <div id="actionOptionsTown4" class='actionOptions' style="display:none;"></div>
                    <div id="actionOptionsTown5" class='actionOptions' style="display:none;"></div>
                    <div id="actionOptionsTown6" class='actionOptions' style="display:none;"></div>
                    <div id="actionOptionsTown7" class='actionOptions' style="display:none;"></div>
                    <div id="actionOptionsTown8" class='actionOptions' style="display:none;"></div>
                    <div id="actionStoriesTown0" class='actionStories' style="display:none;"></div>
                    <div id="actionStoriesTown1" class='actionStories' style="display:none;"></div>
                    <div id="actionStoriesTown2" class='actionStories' style="display:none;"></div>
                    <div id="actionStoriesTown3" class='actionStories' style="display:none;"></div>
                    <div id="actionStoriesTown4" class='actionStories' style="display:none;"></div>
                    <div id="actionStoriesTown5" class='actionStories' style="display:none;"></div>
                    <div id="actionStoriesTown6" class='actionStories' style="display:none;"></div>
                    <div id="actionStoriesTown7" class='actionStories' style="display:none;"></div>
                    <div id="actionStoriesTown8" class='actionStories' style="display:none;"></div>
                    <div id="addActionAtCapText" class="localized" data-lockey="actions>tooltip>add_at_cap"></div>
                </div>
            </div>
            <div id="actionLogContainer">
                    <button class='button' style='margin-top: 5px; margin-right: 2px;' onclick='if(!gameIsStopped) pauseGame();if(bonusActive)toggleOffline();exportSave();if(!bonusActive)toggleOffline();pauseGame();'>存档并开始(K)</button>
                    <div id='totaltime'></div>
                <div id="actionLogTitle" class="large bold block localized" data-lockey="actions>title_log" style="margin:10px auto 2px auto;text-align:center;"></div>
                    <button class='button' style='margin-top: 1px;' onclick='if(!gameIsStopped) pauseGame();if(bonusActive)toggleOffline();importSave();if(!bonusActive)toggleOffline();pauseGame();'>读档并开始(L)</button>
                <ul id="actionLog">
                    <li id="actionLogLoadPrevious" class="small italic localized" data-lockey="actions>log>load_previous" onclick="actionLog.loadHistory(5)"></li>
                    <li id="actionLogLatest" class="small italic localized" data-lockey="actions>log>latest"></li>
                </ul>
            </div>
        </div>

    </main>
    
    <nav id="navbar">
        <a id="navbar_town" href="#shortTownColumn" class="nav localized" data-lockey="menu>navigation>town" onclick="return scrollToPanel(event, 'shortTownColumn')"></a>
        <a id="navbar_actions" href="#actionsColumn" class="nav localized" data-lockey="menu>navigation>actions" onclick="return scrollToPanel(event, 'actionsColumn')"></a>
        <a id="navbar_action_log" href="#actionLogContainer" class="nav localized" data-lockey="menu>navigation>action_log" onclick="return scrollToPanel(event, 'actionLogContainer')"></a>
        <a id="navbar_stats" href="#statsColumn" class="nav localized" data-lockey="menu>navigation>stats" onclick="return scrollToPanel(event, 'statsColumn')"></a>
    </nav>

    <div id="tutorial" style="position:absolute;width:100%;height:100%;left:0;top:0;z-index:9999;">
        <div style="width:100%;height:100%;background-color:grey;position:relative;opacity:.5"></div>
        <div style="padding:20px;background-color:var(--body-background);border:1px solid var(--input-border);position:absolute;text-align:left;left:150px;top:150px;">
            <span class="localized" data-lockey="tutorial"></span>
            <button class="button" onclick="closeTutorial()">OK</button>
        </div>
    </div>
    
    <script>
        if (localStorage["latestTheme"]) {
            document.body.className = `t-${localStorage["latestTheme"]} loading`;
        }
        if (localStorage["loadingText"]) {
            document.getElementById("loadingText").textContent = localStorage["loadingText"];
        }
    </script>

    <script src="data.js"></script>
    <script src="localization.js"></script>
    <script src="helpers.js"></script>
    <script src="uicomponents.js"></script>
    <script src="google.js"></script>
    <script src="actionList.js"></script>
    <script src="actionLog.js"></script>
    <script src="interval.js"></script>
    <script src="driver.js"></script>
    <script src="stats.js"></script>
    <script src="statsgraph.js"></script>
    <script src="actions.js"></script>
    <script src="views/main.view.js"></script>
    <script src="town.js"></script>
    <script src="talents.js"></script>
    <script src="prestige.js"></script>
    <script src="saving.js"></script>
    <script src="challenges.js"></script>
    <script src="hotkeys.js"></script>
    <script src="predictor.js"></script>
    <script src="views/views.js"></script>
    <script src="views/menu.view.js"></script>
    <script src="views/trackedresources.view.js"></script>
    <script src="views/timecontrols.view.js"></script>
    <script src="views/buffs.view.js"></script>
    <script src="views/talenttree.view.js"></script>
    <script>
        loadDefaults();
        Localization.ready.then(() => {
            Views.draw();
            Localization.localizePage("game");
            localStorage["loadingText"] = document.getElementById("loadingText").textContent;
            startGame();
        });
    </script>
</body>
</html>
